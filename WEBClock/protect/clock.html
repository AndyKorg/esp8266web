<html>
<head>
<meta http-equiv="Content-Type" content="text/html"; charset="windows-1251" />
<link rel="stylesheet" href="style.css">
<script src="calendar_ru.js" type="text/javascript"></script>
<script src="let.min.js" type="text/javascript"></script>
<script src="scripts.js" type="text/javascript"></script>
<script src="captions.js" type="text/javascript"></script>
<script>
	function dateToDay(year, month, date)
	{
		var d = new Date("1991","10", "27");
		var Day = [ "воскресенье", "понедельник", "вторник", "среда",
            "четверг", "пятница", "суббота" ];
		document.getElementById("day").text = Day[d.getDay()];
	}
	
	function ntpGetTime()
	{
		var xhr = new XMLHttpRequest();
		var params = 'watch_zone=';
		params += document.getElementById("watch_zone").options[document.getElementById("watch_zone").selectedIndex].value;
		params += "&"+"ntp_gettime=1";
//		xhr.open("POST", 'protect/submit.html', true)
		xhr.open("POST", '', true)
		xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded')
		xhr.send(params);
		document.location.href = 'timeout.htm?time=3&label='+encodeURIComponent((IL==="en")?"update time":'обновление времени');
	}
</script>
<style>
.s15
{
	font-size:15px;
}
.b
{
	font-weight:bold;
}
.sp_30
{
	width:10px;
	height:30px;
}
.cl
{
	clear:left;
}
.sp_10
{
	width:10px;
	height:10px;
}
.date_field{
	width: 120px;
	height: 20px;
}
</style>
</head>
<body onLoad="letCaption()" class="in_body">
<div class="div_c">
        <div>
            <font class="white s15 b"><span id="mainCurrentTime"</span></font>
          	<div class="sp_10">&nbsp;</div>
            <div align="right">
	          	<iframe width="100px" height="30px" id="watch_iframe_id" style="border-style:none" scrolling="no" align="right"></iframe>
            </div>
          	<form name= "form_watch_setting" method="post">
            <div class="line"></div>
            <div class="lab_4">
                <div class="label" id="clkSetTime"></div>
            	<div class="tr">
                    <input type="text" class="watch_label" data-let-input="/^[0-9]$/" data-let-template="/^[0-9](?!\d)|[0-1][0-9]|2[0-3]$/" data-let-length="2" value="~watch_hour~" name="watch_hour"/>
                  <b>:</b>
                    <input type="text" class="watch_label" data-let-input="/^[0-9]$/" data-let-template="/^[0-9](?!\d)|[0-5][0-9]$/" data-let-length="2" value="~watch_minute~" name="watch_minute"/>
    <div class="cl"></div>
    			</div>
                <div class="line"></div>
              	<div class="label" id="clkSetDate"></div>
                <div class="tr">
				<input type="text" class="date_field" value="~watch_date~-~watch_month~-20~watch_year~" onFocus="this.select();lcs(this)" onClick="event.cancelBubble=true;this.select();lcs(this)" name="watch_date"> <!-- used calendar_ru.js -->
                </div>
                <div class="line"></div>
              	<div class="label" id="clkTimeZone"></div>
                <div class="tr"><select id="watch_zone" style="width:160px;height:20px" name="watch_zone">
		            <option value="24">+12 </option>
		            <option value="23">+11</option>
		            <option value="22">+10</option>
		            <option value="21">+9</option>
		            <option value="20">+8</option>
		            <option value="19">+7</option>
		            <option value="18">+6</option>
		            <option value="17">+5</option>
		            <option value="16">+4</option>
		            <option value="15">+3</option>
		            <option value="14">+2</option>
		            <option value="13">+1</option>
		            <option value="12">UTC</option>
		            <option value="11">-1</option>
		            <option value="10">-2</option>
		            <option value="9">-3</option>
		            <option value="8">-4</option>
		            <option value="7">-5</option>
		            <option value="6">-6</option>
		            <option value="5">-7</option>
		            <option value="4">-8</option>
		            <option value="3">-9</option>
		            <option value="2">-10</option>
		            <option value="1">-11</option>
		            <option value="0">-12 </option>
					</select>
				</div>
                <div class="cl"></div>
                <div class="line"></div>
                <div class="lab_4 tr"><input type="button" class="btn" onClick="ntpGetTime()" value="Get time"/></div>
                <div class="line"></div>
                <div class="cl"></div>
				<div class="lab_4 tr"><input name="watch_save" type="submit" class="btn" value="Save"/></div>
		  	</form>
            <div class="div_c"></div>
            <form name= "form_chime_setting" method="post" action="">
                <div class="cl"></div>
                <div class="line"></div>
                <div class="label" id="clkChime"></div>
                <div class="tr"><select style="width:160px;height:20px" name="volume_chime_on" id="volume_chime_on">
                    <option value="0" id="mainOptOff"></option>
                    <option value="1" id="mainOptOn"></option>
                    </select>
                </div>
                <div class="cl"></div>
                <div class="line"></div>
                <div class="label" id="clkVol"></div>
                <div class="tr">
                    <input type="text" class="watch_label" data-let-input="/^[0-9]$/" data-let-template="/^[1-9](?!\d)|[1-5][0-9]|6[0-4]$/" data-let-length="2" value="~volume_chime_max~" name="volume_chime_max" id="volume_chime_max"/>
                	<input type="button" class="btn" onClick="goTest('volume_chime_max','volume_chime_test')" value="Test"/>
                </div>
                <div class="cl"></div>
                <div class="line"></div>
                <div class="lab_4 tr">
                	<input name="volume_chime_save" type="submit" class="btn" onClick="" value="Save"/>
                </div>
        	</form>
            <div id="ntp_get_time"; style="display:none">
	        	<iframe width="100px" height="30px" id="ntp_iframe_id" style="border-style:none" scrolling="no" align="right"></iframe>
			</div>
        </div>
    </div>
			<script type="text/javascript">
			function childTime()
			{
				var time_frame = document.getElementById("watch_iframe_id");
				time_frame.src = "time.html";
			}
			setInterval(childTime, 1000);
			
			var cfg = {
				watch_zone:"~watch_zone~"
			}
			setFormValues(document.forms[0], cfg);
			
			var cfg1 = {
				volume_chime_on:"~volume_chime_on~"
			}
			setFormValues(document.forms[1], cfg1);
			
			</script>
</body>
</html>